# 競馬予測モデル 学習設定ファイル

# ============================================================
# パス設定
# ============================================================
paths:
  data_dir: "data"              # 学習データが入っているディレクトリ
  output_dir: "outputs"          # モデルや結果の出力先
  jockey_profile: "jockey_profile.csv"  # 騎手プロファイルファイル

# ============================================================
# データ分割設定
# ============================================================
split:
  train_end_date: "2024-06-30"  # この日付までを訓練データとする
  validation_ratio: 0.2          # 日付がない場合のランダム分割比率

# ============================================================
# LightGBM パラメータ
# ============================================================
lgbm:
  objective: "lambdarank"
  metric: "ndcg"
  ndcg_eval_at: [1, 3, 5]
  
  # ツリー構造
  num_leaves: 31
  max_depth: -1
  min_child_samples: 20
  
  # 学習率
  learning_rate: 0.05
  n_estimators: 800
  
  # サンプリング
  subsample: 0.8
  subsample_freq: 1
  colsample_bytree: 0.8
  
  # 正則化
  reg_alpha: 0.0
  reg_lambda: 0.0
  
  # その他
  random_state: 42
  importance_type: "gain"
  verbose: -1
  
  # Early Stopping
  early_stopping_rounds: 50

# ============================================================
# 特徴量設定
# ============================================================
features:
  # 近走の参照数
  n_recent: 3
  
  # 除外する人気関連カラム（重要度を下げる）
  exclude_popularity: true
  
  # カスタム除外カラム（追加で除外したいカラム名）
  custom_ignore:
    - "example_column", "last_3f" # 必要に応じて追加

# ============================================================
# 距離帯の定義
# ============================================================
distance_bands:
  short: 1400      # この距離以下を短距離とする
  mile: 1800       # この距離以下をマイルとする
  middle: 2200     # この距離以下を中距離とする（超過は長距離）

# ============================================================
# ロギング設定
# ============================================================
logging:
  verbose: true
  log_evaluation_period: 100
